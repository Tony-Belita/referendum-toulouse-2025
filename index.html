<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R√©f√©rendum 21 Septembre 2025 - Gestion Toulouse</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header avec s√©lecteur de mode -->
    <header class="app-header">
        <div class="container">
            <div class="flex items-center justify-between">
                <div class="header-content">
                    <h1>GN R√©f√©rendum 21 Septembre 2025</h1>
                    <p class="header-subtitle">Gestion Toulouse - 3 Bureaux de Vote - 1366 √©lecteurs</p>
                </div>
                <div class="mode-selector">
                    <select id="modeSelector" class="mode-select">
                        <option value="recherche">üîç Recherche √âlecteur</option>
                        <option value="distribution">üìã Distribution Cartes</option>
                        <option value="entree">üö™ Contr√¥le Entr√©e</option>
                        <option value="emargement">üìù √âmargement Sortie</option>
                        <option value="tableau-bord">üìä Tableau de Bord</option>
                    </select>
                </div>
            </div>
        </div>
    </header>

    <!-- Mode Recherche √âlecteur -->
    <section id="mode-recherche" class="mode-section active">
        <div class="container">
            <div class="hero-section">
                <h2>üîç Recherche d'√âlecteur</h2>
                <p>Recherchez un √©lecteur par nom, pr√©nom et date de naissance</p>
            </div>

            <div class="search-form-container">
                <div class="card">
                    <div class="card__header">
                        <h3>Formulaire de Recherche</h3>
                    </div>
                    <div class="card__body">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Nom *</label>
                                <input type="text" id="searchNom" class="form-control" placeholder="Nom de famille" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Pr√©nom *</label>
                                <input type="text" id="searchPrenom" class="form-control" placeholder="Pr√©nom" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Date de naissance</label>
                                <input type="date" id="searchDateNaissance" class="form-control">
                            </div>
                            <div class="form-group">
                                <div class="form-actions">
                                    <button type="button" id="btnRechercher" class="btn btn--primary">Rechercher</button>
                                    <button type="button" id="btnEffacerRecherche" class="btn btn--outline">Effacer</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- R√©sultats de recherche -->
            <div id="resultatsRecherche" class="hidden">
                <div class="card">
                    <div class="card__header">
                        <h3>R√©sultats de la Recherche</h3>
                    </div>
                    <div class="card__body">
                        <div id="resultatsContainer"></div>
                    </div>
                </div>
            </div>

            <!-- Plan de la salle -->
            <div class="card">
                <div class="card__header">
                    <h3>üè¢ Plan de la Salle de Vote</h3>
                </div>
                <div class="card__body">
                    <div class="plan-salle">
                        <div class="file-bv file-bv-1">
                            <h4>File BV-1 (Bleue)</h4>
                            <p>Bureau 1 - 456 √©lecteurs</p>
                            <p>Num√©ros 1 √† 456</p>
                        </div>
                        <div class="file-bv file-bv-2">
                            <h4>File BV-2 (Rouge)</h4>
                            <p>Bureau 2 - 455 √©lecteurs</p>
                            <p>Num√©ros 1 √† 455</p>
                        </div>
                        <div class="file-bv file-bv-3">
                            <h4>File BV-3 (Verte)</h4>
                            <p>Bureau 3 - 455 √©lecteurs</p>
                            <p>Num√©ros 1 √† 455</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Mode Distribution -->
    <section id="mode-distribution" class="mode-section">
        <div class="container">
            <div class="distribution-header">
                <h2>üìã Distribution des Cartes d'√âlecteur (J-3 √† J-1)</h2>
                <p>V√©rifiez l'identit√© et marquez les cartes comme distribu√©es</p>
            </div>

            <!-- Recherche rapide -->
            <div class="card search-card">
                <div class="card__header">
                    <h3>Recherche Rapide</h3>
                </div>
                <div class="card__body">
                    <div class="form-row">
                        <div class="form-group">
                            <input type="text" id="distributionSearch" class="form-control" placeholder="Recherche par nom, pr√©nom ou num√©ro...">
                        </div>
                        <div class="form-group">
                            <select id="distributionBureau" class="form-control">
                                <option value="">Tous les bureaux</option>
                                <option value="BV-1">Bureau BV-1</option>
                                <option value="BV-2">Bureau BV-2</option>
                                <option value="BV-3">Bureau BV-3</option>
                            </select>
                        </div>
                    </div>
                    <div id="distributionResultats" class="search-results"></div>
                </div>
            </div>

            <!-- √âlecteur s√©lectionn√© pour distribution -->
            <div id="electeurDistribution" class="card electeur-display hidden">
                <div class="card__header">
                    <h3>üë§ √âlecteur S√©lectionn√©</h3>
                </div>
                <div class="card__body">
                    <div id="infoElecteurDistribution" class="electeur-info"></div>
                    <div class="distribution-actions">
                        <button id="btnMarquerDistribuee" class="btn btn--primary btn-large">‚úÖ Carte Distribu√©e</button>
                    </div>
                </div>
            </div>

            <!-- Statistiques distribution -->
            <div class="stats-grid">
                <div class="stat-card stat-bv-1">
                    <div class="stat-header">BV-1</div>
                    <div class="stat-number" id="distrib-bv1">0</div>
                    <div class="stat-label">Cartes distribu√©es</div>
                    <div class="stat-total">/ 456</div>
                </div>
                <div class="stat-card stat-bv-2">
                    <div class="stat-header">BV-2</div>
                    <div class="stat-number" id="distrib-bv2">0</div>
                    <div class="stat-label">Cartes distribu√©es</div>
                    <div class="stat-total">/ 455</div>
                </div>
                <div class="stat-card stat-bv-3">
                    <div class="stat-header">BV-3</div>
                    <div class="stat-number" id="distrib-bv3">0</div>
                    <div class="stat-label">Cartes distribu√©es</div>
                    <div class="stat-total">/ 455</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Mode Contr√¥le Entr√©e -->
    <section id="mode-entree" class="mode-section">
        <div class="container">
            <div class="entree-header">
                <h2>üö™ Contr√¥le d'Entr√©e - Jour J</h2>
                <p>V√©rifiez la carte distribu√©e et orientez vers la bonne file</p>
            </div>

            <!-- Recherche entr√©e -->
            <div class="card search-card">
                <div class="card__header">
                    <h3>Recherche √âlecteur</h3>
                </div>
                <div class="card__body">
                    <div class="form-row">
                        <div class="form-group">
                            <input type="text" id="entreeSearch" class="form-control" placeholder="Nom, pr√©nom ou num√©ro...">
                        </div>
                        <div class="form-group">
                            <select id="entreeBureau" class="form-control">
                                <option value="">Tous les bureaux</option>
                                <option value="BV-1">Bureau BV-1</option>
                                <option value="BV-2">Bureau BV-2</option>
                                <option value="BV-3">Bureau BV-3</option>
                            </select>
                        </div>
                    </div>
                    <div id="entreeResultats" class="search-results"></div>
                </div>
            </div>

            <!-- Orientation √©lecteur -->
            <div id="electeurEntree" class="card electeur-display hidden">
                <div class="card__header">
                    <h3>üéØ Orientation √âlecteur</h3>
                </div>
                <div class="card__body">
                    <div id="infoElecteurEntree" class="electeur-info"></div>
                    <div id="orientationFile" class="orientation-info"></div>
                    <div class="entree-actions">
                        <button id="btnMarquerPresent" class="btn btn--primary btn-large">‚úÖ Pr√©sent au Vote</button>
                    </div>
                </div>
            </div>

            <!-- Affluence temps r√©el -->
            <div class="stats-grid">
                <div class="stat-card stat-bv-1">
                    <div class="stat-header">File BV-1</div>
                    <div class="stat-number" id="present-bv1">0</div>
                    <div class="stat-label">Pr√©sents</div>
                </div>
                <div class="stat-card stat-bv-2">
                    <div class="stat-header">File BV-2</div>
                    <div class="stat-number" id="present-bv2">0</div>
                    <div class="stat-label">Pr√©sents</div>
                </div>
                <div class="stat-card stat-bv-3">
                    <div class="stat-header">File BV-3</div>
                    <div class="stat-number" id="present-bv3">0</div>
                    <div class="stat-label">Pr√©sents</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Mode √âmargement -->
    <section id="mode-emargement" class="mode-section">
        <div class="container">
            <div class="emargement-header">
                <h2>üìù √âmargement et Sortie - Jour J</h2>
                <p>Recherche par num√©ro et bureau pour confirmer le vote</p>
            </div>

            <!-- Recherche √©margement -->
            <div class="card search-card">
                <div class="card__header">
                    <h3>Recherche pour √âmargement</h3>
                </div>
                <div class="card__body">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Num√©ro dans la liste *</label>
                            <input type="number" id="emargementNumero" class="form-control" min="1" max="456" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Bureau *</label>
                            <select id="emargementBureau" class="form-control" required>
                                <option value="">S√©lectionner le bureau</option>
                                <option value="BV-1">Bureau BV-1</option>
                                <option value="BV-2">Bureau BV-2</option>
                                <option value="BV-3">Bureau BV-3</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" id="btnChercherEmargement" class="btn btn--primary">Rechercher</button>
                    </div>
                    <div id="emargementResultat" class="search-results"></div>
                </div>
            </div>

            <!-- √âmargement √©lecteur -->
            <div id="electeurEmargement" class="card electeur-display hidden">
                <div class="card__header">
                    <h3>‚úçÔ∏è √âmargement √âlecteur</h3>
                </div>
                <div class="card__body">
                    <div id="infoElecteurEmargement" class="electeur-info"></div>
                    <div id="signatureInfo" class="signature-info"></div>
                    <div class="emargement-actions">
                        <button id="btnMarquerVote" class="btn btn--primary btn-large">‚úÖ A Vot√©</button>
                    </div>
                </div>
            </div>

            <!-- Participation temps r√©el -->
            <div class="stats-grid">
                <div class="stat-card stat-bv-1">
                    <div class="stat-header">BV-1</div>
                    <div class="stat-number" id="vote-bv1">0</div>
                    <div class="stat-label">Ont vot√©</div>
                    <div class="stat-total">/ 456</div>
                </div>
                <div class="stat-card stat-bv-2">
                    <div class="stat-header">BV-2</div>
                    <div class="stat-number" id="vote-bv2">0</div>
                    <div class="stat-label">Ont vot√©</div>
                    <div class="stat-total">/ 455</div>
                </div>
                <div class="stat-card stat-bv-3">
                    <div class="stat-header">BV-3</div>
                    <div class="stat-number" id="vote-bv3">0</div>
                    <div class="stat-label">Ont vot√©</div>
                    <div class="stat-total">/ 455</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Mode Tableau de Bord -->
    <section id="mode-tableau-bord" class="mode-section">
        <div class="container">
            <div class="tableau-header">
                <h2>üìä Tableau de Bord Complet</h2>
                <p>Vue d'ensemble des 3 bureaux de vote</p>
            </div>

            <!-- Vue d'ensemble -->
            <div class="card">
                <div class="card__header">
                    <h3>üéØ Statistiques Globales</h3>
                </div>
                <div class="card__body">
                    <div class="overview-grid">
                        <div class="overview-stat">
                            <div class="stat-number" id="totalElecteurs">1366</div>
                            <div class="stat-label">Total √©lecteurs</div>
                        </div>
                        <div class="overview-stat">
                            <div class="stat-number" id="totalDistribuees">0</div>
                            <div class="stat-label">Cartes distribu√©es</div>
                        </div>
                        <div class="overview-stat">
                            <div class="stat-number" id="totalPresents">0</div>
                            <div class="stat-label">Pr√©sents</div>
                        </div>
                        <div class="overview-stat">
                            <div class="stat-number" id="totalVotes">0</div>
                            <div class="stat-label">Ont vot√©</div>
                        </div>
                        <div class="overview-stat">
                            <div class="stat-number" id="tauxParticipation">0%</div>
                            <div class="stat-label">Participation</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Par bureau -->
            <div class="card">
                <div class="card__header">
                    <h3>üìà Statistiques par Bureau</h3>
                </div>
                <div class="card__body">
                    <div class="bureau-stats">
                        <div class="bureau-stat bureau-bv-1">
                            <h4>Bureau BV-1</h4>
                            <div class="bureau-numbers">
                                <div>√âlecteurs: <span>456</span></div>
                                <div>Distribu√©es: <span id="bv1-distribuees">0</span></div>
                                <div>Pr√©sents: <span id="bv1-presents">0</span></div>
                                <div>Votes: <span id="bv1-votes">0</span></div>
                                <div>Taux: <span id="bv1-taux">0%</span></div>
                            </div>
                        </div>
                        <div class="bureau-stat bureau-bv-2">
                            <h4>Bureau BV-2</h4>
                            <div class="bureau-numbers">
                                <div>√âlecteurs: <span>455</span></div>
                                <div>Distribu√©es: <span id="bv2-distribuees">0</span></div>
                                <div>Pr√©sents: <span id="bv2-presents">0</span></div>
                                <div>Votes: <span id="bv2-votes">0</span></div>
                                <div>Taux: <span id="bv2-taux">0%</span></div>
                            </div>
                        </div>
                        <div class="bureau-stat bureau-bv-3">
                            <h4>Bureau BV-3</h4>
                            <div class="bureau-numbers">
                                <div>√âlecteurs: <span>455</span></div>
                                <div>Distribu√©es: <span id="bv3-distribuees">0</span></div>
                                <div>Pr√©sents: <span id="bv3-presents">0</span></div>
                                <div>Votes: <span id="bv3-votes">0</span></div>
                                <div>Taux: <span id="bv3-taux">0%</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Exports -->
            <div class="card">
                <div class="card__header">
                    <h3>üì§ Exports et Actions</h3>
                </div>
                <div class="card__body">
                    <div class="export-actions">
                        <button id="btnExportComplet" class="btn btn--primary">üìÑ Export Complet CSV</button>
                        <button id="btnExportEmargement" class="btn btn--outline">üìù Export √âmargement</button>
                        <button id="btnExportParBureau" class="btn btn--outline">üè¢ Export par Bureau</button>
                        <button id="btnExportStats" class="btn btn--outline">üìä Export Statistiques</button>
                    </div>
                </div>
            </div>

            <!-- Listes non distribu√©es -->
            <div class="card">
                <div class="card__header">
                    <h3>‚ö†Ô∏è Cartes Non Distribu√©es</h3>
                </div>
                <div class="card__body">
                    <div id="cartesNonDistribuees">
                        <p class="text-secondary">Chargement des donn√©es...</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="database.js"></script>
    <script src="app.js"></script>
</body>
</html>